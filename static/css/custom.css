/* ===== 強制 works 列表：左圖右文 ===== */

/* works 列表每一列 */
body.list .works-list-entry{
  display: flex !important;
  gap: 12px !important;
  align-items: stretch !important;
  padding: 12px 0 !important;
  border-bottom: 1px solid rgba(255,255,255,0.10) !important;
}

/* 左側縮圖容器：固定寬度、等高 */
body.list .works-list-thumb{
  flex: 0 0 84px !important;   /* ✅ 變小：改這個數字 */
  width: 84px !important;
  height: auto !important;
  overflow: hidden !important;
  border-radius: 2px !important;
  background: rgba(255,255,255,0.06) !important;
  display: block !important;
}

/* 讓左側縮圖跟右側文字等高 */
body.list .works-list-entry > .works-list-thumb{
  align-self: stretch !important;
}

/* 圖片填滿 */
body.list .works-list-thumb img{
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}

/* 右側文字 */
body.list .works-list-text{
  flex: 1 1 auto !important;
  min-width: 0 !important;
}

/* 避免列太矮 */
body.list .works-list-entry{
  min-height: 96px !important;
}
/* ===== site title image (non-home) ===== */

.site-title-image{
  display: inline-block;
}

.site-title-image img{
  height: 28px;              /* 可自行調整大小 */
  width: auto;
  transition: filter 0.15s ease;
  display: block;
}

/* 滑鼠移過去 → 顏色反轉 */
.site-title-image:hover img{
  filter: invert(1);
}
/* 非首頁：標題圖片 hover 反相 */
.site-title-image img{
  height: 128px;
  width: auto;
  display: block;
  transition: filter 0.15s ease;
}

.site-title-image:hover img{
  filter: invert(1);
}
/* ===== works-img：隨機散落 / 可重疊 / 漂浮 / hover 放大 ===== */

.works-img-board{
  position: relative;
  width: 100%;
  min-height: 78vh;
  overflow: hidden;
  margin-top: 10px;
}

.works-img-item{
  position: absolute;
  display: block;
  aspect-ratio: 16 / 9;
  background: rgba(0,0,0,0); /* 透明框 */
  transform-origin: center center;
  will-change: transform;
  text-decoration: none;
  transition: transform 170ms ease, filter 170ms ease, box-shadow 170ms ease;
}

/* 直圖也塞進 16:9 透明框 */
.works-img-item img{
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
  transition: filter 170ms ease;
}

/* 漂浮：只做小位移 + 極小旋轉，不動 left/top */
@keyframes floaty2 {
  0%   { transform: translate3d(0,0,0) rotate(var(--r)) scale(var(--baseScale,1)); }
  50%  { transform: translate3d(var(--floatAmp,8px), calc(var(--floatAmp,8px) * -0.7), 0)
                rotate(calc(var(--r) + 0.6deg)) scale(var(--baseScale,1)); }
  100% { transform: translate3d(0,0,0) rotate(var(--r)) scale(var(--baseScale,1)); }
}

.works-img-item{
  animation: floaty2 var(--floatDur, 12s) ease-in-out infinite;
}

/* hover：暫停漂浮、變亮、陰影、放大（在 baseScale 基礎上） */
.works-img-item:hover{
  animation-play-state: paused;
  filter: brightness(1.12) contrast(1.06) saturate(1.06);
  box-shadow: 0 14px 28px rgba(0,0,0,.22);
  transform: translate3d(0,0,0) rotate(var(--r)) scale(calc(var(--baseScale,1) * 1.08));
  z-index: 9999 !important;
}

.works-img-item:hover img{
  filter: saturate(1.08);
}

.works-img-fallback{
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  border: 1px solid #ccc;
  font-size: 12px;
  color: #666;
}
/* ===== works 清單（左側小方塊縮圖） ===== */
.works-list{ margin-top: 12px; }

.work-row{ margin: 0 0 10px 0; }
.work-row-link{
  display:flex;
  gap:12px;
  align-items:stretch;
  text-decoration:none;
}

.work-row-thumb{
  width:64px;
  flex:0 0 64px;
  background:transparent;
}

.work-row-thumb img{
  width:64px;
  height:64px;
  display:block;
  object-fit:cover;
}

.work-row-text{
  display:flex;
  flex-direction:column;
  justify-content:center;
  min-height:64px;
}

.work-row-title{ font-size:12px; line-height:1.2; }
.work-row-year{ font-size:12px; opacity:.7; margin-top:4px; }
/* ================================
   導覽列 hover / active 變紅
   （只影響非首頁）
================================ */

/* 一般狀態 */
header.header .menu a {
  color: #FFFFFF;
  transition: color 0.15s ease;
}

/* 滑鼠經過 */
header.header .menu a:hover {
  color: #c40000; /* 紅色，可自行改 */
}

/* 目前頁面（active） */
header.header .menu a[aria-current="page"],
header.header .menu a.active {
  color: #c40000;
}

/* 點擊瞬間（滑鼠按下） */
header.header .menu a:active {
  color: #c40000;
}
/* ================================
   TOP 按鈕（圖片 + hover 反相）
================================ */

#back-to-top {
  position: fixed;
  right: 24px;
  bottom: 24px;
  width: 48px;        /* 按鈕大小，可調 */
  height: 48px;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease, transform 0.25s ease;
  z-index: 9999;
}

#back-to-top.show {
  opacity: 1;
  pointer-events: auto;
}

#back-to-top img {
  width: 100%;
  height: 100%;
  display: block;
  transition: filter 0.2s ease, transform 0.2s ease;
}

/* hover：顏色反相 + 微放大 */
#back-to-top:hover img {
  filter: invert(1);
  transform: scale(1.08);
}
#back-to-top{
  position: fixed;
  right: 24px;
  bottom: 24px;
  width: 56px;
  height: 56px;
  z-index: 99999;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease, transform .2s ease;
}

#back-to-top.show{
  opacity: 1;
  pointer-events: auto;
}

#back-to-top img{
  width: 100%;
  height: 100%;
  display: block;
  transition: filter .18s ease, transform .18s ease;
}

#back-to-top:hover img{
  filter: invert(1);
  transform: scale(1.06);
}
/* ===== TOP button (image) ===== */
#back-to-top{
  position: fixed;
  right: 24px;
  bottom: 24px;
  width: 64px;
  height: 64px;
  z-index: 99999;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease, transform .2s ease;
}

#back-to-top.show{
  opacity: 1;
  pointer-events: auto;
}

#back-to-top img{
  width: 100%;
  height: 100%;
  display: block;
  transition: filter .18s ease, transform .18s ease;
}

#back-to-top:hover img{
  filter: invert(1);
  transform: scale(1.06);
}
/* ===== Work ring: 強制水平旋轉、避免被主題 transform 汙染 ===== */
.work-ring{
  position: relative;
  width: 100%;
  height: 460px;
  perspective: 1200px;
  transform-style: preserve-3d;
  overflow: hidden;
  transform: none !important;   /* 砍掉任何外層 rotateX/rotateY */
}

.work-ring-item{
  position: absolute;
  left: 50%;
  top: 50%;
  transform-style: preserve-3d;
  will-change: transform, opacity;
}

.work-ring-item img{
  display: block;
  width: 420px;           /* 你覺得太大/太小就調這個 */
  max-width: 56vw;
  height: auto;
  transform: none !important;
}

/* 文字與圖不重疊 */
.post-content{ position: relative; z-index: 1; }
.work-images-below{ margin-top: 26px; }
.work-img-row img{ max-width: 100%; height: auto; display:block; }
/* =========================
   Work ring (works single)
   ========================= */

.work-ring-wrap{
  margin: 10px 0 18px;
  position: relative;
}

.work-ring{
  position: relative;
  width: 100%;
  height: min(520px, 64vh);
  perspective: 1400px;
  transform-style: preserve-3d;
  overflow: visible;
  transform: none !important; /* 防止被外層 rotateX 汙染 */
}

/* item 是可點擊的（開新視窗看原圖） */
.work-ring-item{
  position: absolute;
  left: 50%;
  top: 50%;
  transform-style: preserve-3d;
  will-change: transform, opacity, filter;
  text-decoration: none;
}

/* 16:9 透明框：直圖也會被置中塞進去 */
.work-ring-frame{
  display: block;
  width: min(520px, 62vw);   /* 圖更大：調這裡 */
  aspect-ratio: 16 / 9;
  background: rgba(0,0,0,0); /* 透明框 */
  overflow: hidden;
}

.work-ring-frame img{
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

/* hover：稍微放大、變亮、有陰影 */
.work-ring-item:hover{
  filter: brightness(1.08) contrast(1.03) saturate(1.05);
  z-index: 99999 !important;
}
.work-ring-item:hover .work-ring-frame{
  transform: scale(1.06);
  box-shadow: 0 16px 34px rgba(0,0,0,.22);
}

/* 文字永遠在圓環下面，不重疊 */
.post-content{
  position: relative;
  z-index: 1;
  margin-top: 10px;
}

/* 下方圖（保留那份） */
.work-images-below{
  margin-top: 22px;
}
.work-img-row img{
  max-width: 100%;
  height: auto;
  display: block;
}
/* ===== 首頁 → works 按鈕（複製回首頁按鈕的樣式） ===== */
.site-works-btn{
  position: fixed;
  right: 24px;
  bottom: 96px; /* 比回首頁那顆高一點 */
  z-index: 999;
  display: block;
}

.site-works-btn img{
  width: 48px;          /* 跟回首頁一致 */
  height: auto;
  display: block;
  transition: filter 160ms ease, transform 160ms ease;
}

/* hover：反色 + 微放大 */
.site-works-btn:hover img{
  filter: invert(1);
  transform: scale(1.05);
}
/* Home hero background (forced) */
body.home {
 
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}
.home-bg{
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}
/* ===== Nav color: follow light/dark theme, keep hover red ===== */

/* PaperMod 通常會在 <body> 加 class: dark */
body:not(.dark) .header .nav a,
body:not(.dark) .header .logo a,
body:not(.dark) .header .logo,
body:not(.dark) .header a {
  color: #000 !important;
}

body.dark .header .nav a,
body.dark .header .logo a,
body.dark .header .logo,
body.dark .header a {
  color: #fff !important;
}

/* hover / focus / active 永遠紅色 */
.header .nav a:hover,
.header .nav a:focus,
.header .nav a:active,
.header .logo a:hover,
.header .logo a:focus,
.header .logo a:active {
  color: #ff0000 !important;
}

/* 如果你還有左側那排選單（可能是手機 menu 或你做的側欄），也一起套用 */
body:not(.dark) .menu a { color: #000 !important; }
body.dark .menu a { color: #fff !important; }
.menu a:hover, .menu a:focus, .menu a:active { color: #ff0000 !important; }
/* ===== Nav color: follow theme (light=black, dark=white), hover always red ===== */

/* 先把所有狀態統一：link / visited */
.header .nav a,
.header .nav a:visited,
.header .logo a,
.header .logo a:visited,
.menu a,
.menu a:visited {
  color: #000 !important;   /* 預設：亮色黑字 */
}

/* 深色模式：支援多種判斷方式（PaperMod 可能用其中一種） */
html.dark .header .nav a,
html.dark .header .nav a:visited,
html.dark .header .logo a,
html.dark .header .logo a:visited,
html.dark .menu a,
html.dark .menu a:visited,
body.dark .header .nav a,
body.dark .header .nav a:visited,
body.dark .header .logo a,
body.dark .header .logo a:visited,
body.dark .menu a,
body.dark .menu a:visited,
html[data-theme="dark"] .header .nav a,
html[data-theme="dark"] .header .nav a:visited,
html[data-theme="dark"] .header .logo a,
html[data-theme="dark"] .header .logo a:visited,
html[data-theme="dark"] .menu a,
html[data-theme="dark"] .menu a:visited,
body[data-theme="dark"] .header .nav a,
body[data-theme="dark"] .header .nav a:visited,
body[data-theme="dark"] .header .logo a,
body[data-theme="dark"] .header .logo a:visited,
body[data-theme="dark"] .menu a,
body[data-theme="dark"] .menu a:visited {
  color: #fff !important;   /* 深色白字 */
}

/* hover / focus / active 永遠紅色（一樣把 visited 也鎖住） */
.header .nav a:hover,
.header .nav a:focus,
.header .nav a:active,
.header .nav a:visited:hover,
.header .logo a:hover,
.header .logo a:focus,
.header .logo a:active,
.header .logo a:visited:hover,
.menu a:hover,
.menu a:focus,
.menu a:active,
.menu a:visited:hover {
  color: #ff0000 !important;
}
/* ===== Home: add an extra full-bleed cover image UNDER your existing hero ===== */
.home-bg-cover{
  position: fixed;       /* 跟著視窗 */
  inset: 0;
  z-index: 0;            /* 最底層 */
  background-position: center center;
  background-repeat: no-repeat;
  background-size: cover; /* 這就是「填滿整個畫面」 */
}

/* 讓你原本的 hero 圖層與文字都在上面 */
.home-bg,
.hero-name,
main,
.header {
  position: relative;
  z-index: 1;
}

/* 如果你的首頁本來就把 header 隱藏了，這不會影響 */
/* ===== Nav links: auto black/white by theme + hover red (non-home pages) ===== */

/* 讓內頁導覽列文字跟著主題：亮=黑、暗=白（PaperMod 本來就有變數，這裡強制吃它） */
.header.header .nav a,
.header.header .menu a,
.header.header .menu__inner a{
  color: var(--primary) !important;
}

/* hover / focus / active 都變紅 */
.header.header .nav a:hover,
.header.header .menu a:hover,
.header.header .menu__inner a:hover,
.header.header .nav a:focus,
.header.header .menu a:focus,
.header.header .menu__inner a:focus,
.header.header .nav a:active,
.header.header .menu a:active,
.header.header .menu__inner a:active{
  color: #ff0000 !important;
}

/* 目前所在頁（active）也保持紅（若主題有加 active class） */
.header.header .menu a.active,
.header.header .menu__inner a.active{
  color: #ff0000 !important;
}
/* ===== non-home links hover red (force) ===== */
body:not(.home) a:hover {
  color: red !important;
}
/* ===== non-home menu hover red (force) ===== */
body:not(.home) a:hover,
body:not(.home) a:focus,
body:not(.home) a:active {
  color: red !important;
}

/* ============================
   FIX PACK (DO NOT EDIT ABOVE)
   - Fix broken CSS brace
   - Hide PaperMod header text on HOME only
   - Non-home menu hover red (force)
============================ */

/* --- HOME ONLY: hide PaperMod header/nav/title text, but don't nuke your custom home layout --- */
body.home .header .logo,
body.home .header .logo a,
body.home .header .nav,
body.home .header .menu,
body.home .header .site-title,
body.home .header .breadcrumbs,
body.home .page-header{
  display: none !important;
}

/* --- Non-home: nav/link colors follow theme variables; hover always red --- */
body:not(.home) .header a{
  color: var(--primary) !important;
  transition: color 0.15s ease;
}
body:not(.home) .header a:hover,
body:not(.home) .header a:focus,
body:not(.home) .header a:active{
  color: red !important;
}

/* PaperMod menu sometimes wraps text in spans */
body:not(.home) .header a:hover span,
body:not(.home) .header a:focus span,
body:not(.home) .header a:active span{
  color: red !important;
}

/* Safety: if your browser supports :has(), also hide header when your fullscreen home bg exists */
@supports(selector(:has(*))){
  body:has(.fullscreen-bg) .header,
  body:has(.fullscreen-bg) header{
    display: none !important;
  }
}

/* --- IMPORTANT: close any accidentally-open block (this prevents "CSS stops working" disasters) --- */
/* ===== Force menu hover red (non-home) ===== */
body:not(.home) header.header a:hover,
body:not(.home) header.header a:focus,
body:not(.home) header.header a:active{
  color: red !important;
}

/* 有些主題把文字包在 span 裡 */
body:not(.home) header.header a:hover span,
body:not(.home) header.header a:focus span,
body:not(.home) header.header a:active span{
  color: red !important;
}