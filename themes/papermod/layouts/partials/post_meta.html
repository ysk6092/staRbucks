<!-- META_TEST -->
{{- $scratch := newScratch }}

{{/* === YEAR / DATE LOGIC (supports date as "YYYY" or full date) === */}}
{{- if .Params.year -}}
  {{- $scratch.Add "meta" (slice (printf "<span>%v</span>" .Params.year)) }}
{{- else -}}
  {{- $raw := .Param "date" -}}
  {{- if not $raw -}}{{- $raw = .Param "publishDate" -}}{{- end -}}
  {{- if not $raw -}}{{- $raw = .Param "lastmod" -}}{{- end -}}

  {{- if $raw -}}
    {{- $s := printf "%v" $raw -}}
    {{- if ge (len $s) 4 -}}
      {{- $scratch.Add "meta" (slice (printf "<span>%s</span>" (substr $s 0 4))) }}
    {{- end -}}
  {{- else if not .Date.IsZero -}}
    {{- $scratch.Add "meta" (slice (printf "<span>%s</span>" (.Date | time.Format "2006"))) }}
  {{- end -}}
{{- end }}

{{- if (.Param "ShowReadingTime") -}}
{{- $scratch.Add "meta" (slice (printf "<span>%s</span>" (i18n "read_time" .ReadingTime | default (printf "%d min" .ReadingTime)))) }}
{{- end }}

{{- if (.Param "ShowWordCount") -}}
{{- $scratch.Add "meta" (slice (printf "<span>%s</span>" (i18n "words" .WordCount | default (printf "%d words" .WordCount)))) }}
{{- end }}

{{- if not (.Param "hideAuthor") -}}
{{- with (partial "author.html" .) }}
{{- $scratch.Add "meta" (slice (printf "<span>%s</span>" .)) }}
{{- end }}
{{- end }}

{{- with ($scratch.Get "meta") }}
{{- delimit . "&nbsp;Â·&nbsp;" | safeHTML -}}
{{- end -}}